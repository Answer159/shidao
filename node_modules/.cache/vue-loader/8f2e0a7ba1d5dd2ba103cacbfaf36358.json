{"remainingRequest":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\src\\components\\contant\\collect\\CollectButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\src\\components\\contant\\collect\\CollectButton.vue","mtime":1650696352027},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650696337516},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\babel-loader\\lib\\index.js","mtime":1650696335596},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650696337516},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\vue-loader\\lib\\index.js","mtime":1650696350603}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge0NvbGxlY3RDbGFzcyxDYW5jZWxDb2xsZWN0Q2xhc3MsQ29sbGVjdFF1ZXN0aW9uLENhbmNlbENvbGxlY3RRdWVzdGlvbn0gZnJvbSAnLi4vLi4vLi4vbmV0d29yay9jb2xsZWN0JzsNCmltcG9ydCB7IFVwZGF0ZUxvY2FsIH0gZnJvbSAnLi4vLi4vLi4vbmV0d29yay91c2VyJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiJDb2xsZWN0QnV0dG9uIiwNCiAgcHJvcHM6ew0KICAgIHF1ZXN0aW9uSWQ6bnVsbCwNCiAgICBjbGFzc0lkOm51bGwsDQogIH0sDQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICBpc0NvbGxlY3Q6ZmFsc2UsDQogICAgICBpc0xvZ2luOnRydWUNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6ew0KICAgIElzQ29sbGVjdGVkKCl7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyRGF0YS5jb2xsZWN0aW9uUXVlc3Rpb24pDQogICAgICBpZih0aGlzLmlzTG9naW4gPT09IGZhbHNlKXsNCiAgICAgICAgY29uc29sZS5sb2coIiEiKQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICBlbHNlIGlmKCh0aGlzLmNsYXNzSWQhPT1udWxsJiZ0aGlzLmNsYXNzSWQhPT11bmRlZmluZWQpJiZ0aGlzLiRzdG9yZS5zdGF0ZS51c2VyRGF0YS5jb2xsZWN0aW9uQ2xhc3MgPT09IG51bGwpew0KICAgICAgICBjb25zb2xlLmxvZygiPyIpDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIGVsc2UgaWYoKHRoaXMucXVlc3Rpb25JZCE9PW51bGwmJnRoaXMucXVlc3Rpb25JZCE9PXVuZGVmaW5lZCkmJnRoaXMuJHN0b3JlLnN0YXRlLnVzZXJEYXRhLmNvbGxlY3Rpb25RdWVzdGlvbiA9PT0gbnVsbCl7DQogICAgICAgIGNvbnNvbGUubG9nKCI/PyIpDQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgICAgbGV0IGZsYWcgPSBmYWxzZTsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2xhc3NJZCkNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucXVlc3Rpb25JZCkNCiAgICAgIGlmKHRoaXMuY2xhc3NJZCAhPT0gbnVsbCYmdGhpcy5jbGFzc0lkICE9PSB1bmRlZmluZWQpew0KICAgICAgICBjb25zb2xlLmxvZygiPz8/IikNCiAgICAgICAgbGV0IGNvbGxlY3RDbGFzcyA9ICB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyRGF0YS5jb2xsZWN0aW9uQ2xhc3M7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJEYXRhLmNvbGxlY3Rpb25DbGFzcykNCiAgICAgICAgY29uc3QgdGhhdD10aGlzOw0KICAgICAgICBsZXQgIGFycmF5Q2xhc3MgPSBjb2xsZWN0Q2xhc3Muc3BsaXQoIiYiKTsNCiAgICAgICAgY29uc29sZS5sb2coYXJyYXlDbGFzcyk7DQogICAgICAgIGFycmF5Q2xhc3MuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpew0KICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGF0LmNsYXNzSWQrIiIpOw0KICAgICAgICAgIGlmKHZhbHVlID09PSB0aGF0LmNsYXNzSWQrIiIpew0KICAgICAgICAgICBmbGFnID0gdHJ1ZQ0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogIA0KICAgICAgaWYodGhpcy5xdWVzdGlvbklkICE9PSBudWxsJiZ0aGlzLnF1ZXN0aW9uSWQgIT09IHVuZGVmaW5lZCl7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMucXVlc3Rpb25JZCkNCiAgICAgICAgY29uc3QgdGhhdD10aGlzOw0KICAgICAgICBsZXQgY29sbGVjdFF1ZXN0aW9uID0gIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJEYXRhLmNvbGxlY3Rpb25RdWVzdGlvbjsNCiAgICAgICAgbGV0ICBhcnJheVF1ZXN0aW9uID0gY29sbGVjdFF1ZXN0aW9uLnNwbGl0KCImIik7DQogICAgICAgIGFycmF5UXVlc3Rpb24uZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpew0KICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGF0LnF1ZXN0aW9uSWQrIiIpOw0KICAgICAgICAgIGlmKHZhbHVlID09PSB0aGF0LnF1ZXN0aW9uSWQrIiIpew0KICAgICAgICAgICAgZmxhZyA9IHRydWUNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICAgIC8vIGFycmF5UXVlc3Rpb24uZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgLy8gICBjb25zb2xlLmxvZyh2YWx1ZSk7DQogICAgICAgIC8vICAgY29uc29sZS5sb2codGhhdC5jbGFzc0lkKyIiKTsNCiAgICAgICAgLy8gICBpZihlbGVtZW50ID09PSB0aGlzLnF1ZXN0aW9uSWQpew0KICAgICAgICAvLyAgICAgIGZsYWcgPSB0cnVlDQogICAgICAgIC8vICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgLy8gICB9DQogICAgICAgIC8vIH0pOw0KICAgICAgfSAgICAgICANCiAgICAgIHRoaXMuaXNDb2xsZWN0ID0gZmxhZzsNCiAgICAgIHJldHVybiBmbGFnOyAgICAgIA0KICAgIH0sDQoNCiAgICBCdXR0b25DbGljaygpew0KICAgICAgaWYodGhpcy5pc0xvZ2luID09PSBmYWxzZSl7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ImVycm9yIiwNCiAgICAgICAgICBtZXNzYWdlOiLnmbvlvZXlkI7ljbPlj6/mlLbol48s6K+35YWI55m75b2V77yBIg0KICAgICAgICB9KQ0KICAgICAgICByZXR1cm47DQogICAgICB9IA0KICAgICAgaWYodGhpcy5jbGFzc0lkICE9IG51bGwpew0KICAgICAgICB0aGlzLkNsYXNzQ2xpY2soKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYodGhpcy5xdWVzdGlvbklkICE9IG51bGwpew0KICAgICAgICB0aGlzLlF1ZXN0aW9uQ2xpY2soKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBDbGFzc0NsaWNrKCl7DQogICAgICAgIGlmKHRoaXMuaXNDb2xsZWN0ID09PSB0cnVlKXsNCiAgICAgICAgLy/lj5HpgIHlj5bmtojmlLbol4/or7fmsYINCiAgICAgICAgQ2FuY2VsQ29sbGVjdENsYXNzKHRoaXMuY2xhc3NJZCkudGhlbigocmVzKT0+ew0KICAgICAgICAgIGlmKHJlcy5kYXRhLm1zZyA9PT0gInN1Y2Nlc3MiKXsNCiAgICAgICAgICAgIFVwZGF0ZUxvY2FsKCk7DQogICAgICAgICAgICB0aGlzLmlzQ29sbGVjdCA9IGZhbHNlOyAgIA0KICAgICAgICAgICAgICAgDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKHJlcy5kYXRhLm1zZz09PSAiZmFpbCIpew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ImVycm9yIiwNCiAgICAgICAgICAgICAgbWVzc2FnZToi5Y+W5raI5pS26JeP5aSx6LSl77yM6K+36YeN6K+V77yBIg0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQoNCiAgICAgICAgfSkNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgfWVsc2V7DQogICAgICAgIC8v5Y+R6YCB5pS26JeP6K+35rGCDQogICAgICAgIENvbGxlY3RDbGFzcyh0aGlzLmNsYXNzSWQpLnRoZW4oKHJlcyk9PnsNCiAgICAgICAgICBpZihyZXMuZGF0YS5tc2c9PT0gInN1Y2Nlc3MiKXsNCiAgICAgICAgICAgIFVwZGF0ZUxvY2FsKCk7DQogICAgICAgICAgICB0aGlzLmlzQ29sbGVjdCA9IHRydWU7ICAgDQogICAgICAgICAgICAgICANCiAgICAgICAgICB9DQogICAgICAgICAgaWYocmVzLmRhdGEubXNnPT09ICJmYWlsIil7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgdHlwZToiZXJyb3IiLA0KICAgICAgICAgICAgICBtZXNzYWdlOiLmlLbol4/lpLHotKXvvIzor7fph43or5XvvIEiDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgICAgaWYocmVzLmRhdGEubXNnID09PSAi6K++56iL5bey5pS26JePIil7DQogICAgICAgICAgICBVcGRhdGVMb2NhbCgpOyAgICAgICAgDQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgICAgICB9KQ0KICAgICAgICAgIA0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBRdWVzdGlvbkNsaWNrKCl7DQogICAgICBpZih0aGlzLmlzQ29sbGVjdCA9PT0gdHJ1ZSl7DQogICAgICAvL+WPkemAgeWPlua2iOaUtuiXj+ivt+axgg0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnF1ZXN0aW9uSWQpDQogICAgICBDYW5jZWxDb2xsZWN0UXVlc3Rpb24odGhpcy5xdWVzdGlvbklkKTsNCiAgICAgICAgVXBkYXRlTG9jYWwoKTsNCiAgICAgICAgdGhpcy5pc0NvbGxlY3QgPSBmYWxzZTsNCiAgICAgIH1lbHNlew0KICAgICAgICAvL+WPkemAgeaUtuiXj+ivt+axgg0KICAgICAgICBDb2xsZWN0UXVlc3Rpb24odGhpcy5xdWVzdGlvbklkKTsNCiAgICAgICAgVXBkYXRlTG9jYWwoKTsNCiAgICAgICAgdGhpcy5pc0NvbGxlY3QgPSB0cnVlOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBJc0xvZ2luKCl7DQogICAgICBpZih0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbiA9PT0gMCl7DQogICAgICAgIHRoaXMuaXNMb2dpbiA9IGZhbHNlOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy5pc0xvZ2luID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIG1vdW50ZWQoKXsNCiAgICAgDQogICAgaWYodGhpcy5Jc0xvZ2luKCkpew0KICAgICAgIHRoaXMuSXNDb2xsZWN0ZWQoKTsNCiAgICAgICBjb25zb2xlLmxvZyh0aGlzLmlzQ29sbGVjdCk7DQogICAgfSANCiAgfSwNCg0KfQ0K"},{"version":3,"sources":["CollectButton.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"CollectButton.vue","sourceRoot":"src/components/contant/collect","sourcesContent":["<template>\r\n  <div class=\"collect\" @click=\"ButtonClick\" >\r\n      <i v-if=\"isCollect === false\" class=\"el-icon-star-off\"></i>\r\n      <i v-if=\"isCollect === true\" class=\"el-icon-star-on isC\"></i>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {CollectClass,CancelCollectClass,CollectQuestion,CancelCollectQuestion} from '../../../network/collect';\r\nimport { UpdateLocal } from '../../../network/user'\r\nexport default {\r\n  name:\"CollectButton\",\r\n  props:{\r\n    questionId:null,\r\n    classId:null,\r\n  },\r\n  data(){\r\n    return{\r\n      isCollect:false,\r\n      isLogin:true\r\n    }\r\n  },\r\n  methods:{\r\n    IsCollected(){\r\n      console.log(this.$store.state.userData.collectionQuestion)\r\n      if(this.isLogin === false){\r\n        console.log(\"!\")\r\n        return false;\r\n      }\r\n      else if((this.classId!==null&&this.classId!==undefined)&&this.$store.state.userData.collectionClass === null){\r\n        console.log(\"?\")\r\n        return false;\r\n      }\r\n      else if((this.questionId!==null&&this.questionId!==undefined)&&this.$store.state.userData.collectionQuestion === null){\r\n        console.log(\"??\")\r\n      return false;\r\n    }\r\n      let flag = false;\r\n      console.log(this.classId)\r\n      console.log(this.questionId)\r\n      if(this.classId !== null&&this.classId !== undefined){\r\n        console.log(\"???\")\r\n        let collectClass =  this.$store.state.userData.collectionClass;\r\n        console.log(this.$store.state.userData.collectionClass)\r\n        const that=this;\r\n        let  arrayClass = collectClass.split(\"&\");\r\n        console.log(arrayClass);\r\n        arrayClass.forEach(function (value){\r\n          console.log(value);\r\n          console.log(that.classId+\"\");\r\n          if(value === that.classId+\"\"){\r\n           flag = true\r\n          return true;\r\n          }\r\n        });\r\n      }\r\n  \r\n      if(this.questionId !== null&&this.questionId !== undefined){\r\n        console.log(this.questionId)\r\n        const that=this;\r\n        let collectQuestion =  this.$store.state.userData.collectionQuestion;\r\n        let  arrayQuestion = collectQuestion.split(\"&\");\r\n        arrayQuestion.forEach(function (value){\r\n          console.log(value);\r\n          console.log(that.questionId+\"\");\r\n          if(value === that.questionId+\"\"){\r\n            flag = true\r\n            return true;\r\n          }\r\n        });\r\n        // arrayQuestion.forEach(element => {\r\n        //   console.log(value);\r\n        //   console.log(that.classId+\"\");\r\n        //   if(element === this.questionId){\r\n        //      flag = true\r\n        //     return true;\r\n        //   }\r\n        // });\r\n      }       \r\n      this.isCollect = flag;\r\n      return flag;      \r\n    },\r\n\r\n    ButtonClick(){\r\n      if(this.isLogin === false){\r\n        this.$message({\r\n          type:\"error\",\r\n          message:\"登录后即可收藏,请先登录！\"\r\n        })\r\n        return;\r\n      } \r\n      if(this.classId != null){\r\n        this.ClassClick();\r\n        return;\r\n      }\r\n      if(this.questionId != null){\r\n        this.QuestionClick();\r\n        return;\r\n      }\r\n    },\r\n\r\n    ClassClick(){\r\n        if(this.isCollect === true){\r\n        //发送取消收藏请求\r\n        CancelCollectClass(this.classId).then((res)=>{\r\n          if(res.data.msg === \"success\"){\r\n            UpdateLocal();\r\n            this.isCollect = false;   \r\n               \r\n          }\r\n          if(res.data.msg=== \"fail\"){\r\n            this.$message({\r\n              type:\"error\",\r\n              message:\"取消收藏失败，请重试！\"\r\n            })\r\n          }\r\n\r\n        })\r\n        \r\n        \r\n      }else{\r\n        //发送收藏请求\r\n        CollectClass(this.classId).then((res)=>{\r\n          if(res.data.msg=== \"success\"){\r\n            UpdateLocal();\r\n            this.isCollect = true;   \r\n               \r\n          }\r\n          if(res.data.msg=== \"fail\"){\r\n            this.$message({\r\n              type:\"error\",\r\n              message:\"收藏失败，请重试！\"\r\n            })\r\n          }\r\n           if(res.data.msg === \"课程已收藏\"){\r\n            UpdateLocal();        \r\n          }\r\n          \r\n        })\r\n          \r\n      }\r\n    },\r\n\r\n    QuestionClick(){\r\n      if(this.isCollect === true){\r\n      //发送取消收藏请求\r\n        console.log(this.questionId)\r\n      CancelCollectQuestion(this.questionId);\r\n        UpdateLocal();\r\n        this.isCollect = false;\r\n      }else{\r\n        //发送收藏请求\r\n        CollectQuestion(this.questionId);\r\n        UpdateLocal();\r\n        this.isCollect = true;\r\n      }\r\n    },\r\n\r\n    IsLogin(){\r\n      if(this.$store.state.login === 0){\r\n        this.isLogin = false;\r\n        return false;\r\n      }else{\r\n        this.isLogin = true;\r\n        return true;\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted(){\r\n     \r\n    if(this.IsLogin()){\r\n       this.IsCollected();\r\n       console.log(this.isCollect);\r\n    } \r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.collect{\r\n  position: absolute;\r\n  cursor: pointer;\r\n  right: 20%;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  padding: 0 5px;\r\n  border: 1px solid var(--color-border);\r\n  border-radius: 5px;\r\n  font-size: var(--font-size-very-big);\r\n}\r\n\r\n.isC{\r\n  color: rgb(247, 186, 42);\r\n}\r\n\r\n\r\n</style>"]}]}