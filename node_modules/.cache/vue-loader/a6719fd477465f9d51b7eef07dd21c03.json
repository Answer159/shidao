{"remainingRequest":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\src\\components\\contant\\order\\OrderDetail.vue?vue&type=style&index=0&id=3f14a838&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\src\\components\\contant\\order\\OrderDetail.vue","mtime":1650696352033},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\css-loader\\dist\\cjs.js","mtime":1650696340241},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1650696350603},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\postcss-loader\\src\\index.js","mtime":1650696347248},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650696337516},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\vue-loader\\lib\\index.js","mtime":1650696350603}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLm5hdmJhciB7DQogIGhlaWdodDogODBweDsNCiAgd2lkdGg6IDEwMCU7DQogIGJhY2tncm91bmQtY29sb3I6IGJsYWNrOw0KfQ0KLmRldGFpbHsNCiAgZGlzcGxheTogZmxleDsNCiAgbWFyZ2luLXRvcDogNDVweDsNCiAgcGFkZGluZzogMjBweCAyMHB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgYm94LXNoYWRvdzogcmdiYSgxNDksIDE1NywgMTY1LCAwLjIpIDBweCA4cHggMjRweDsNCn0NCg0KLmltZyB7DQogIHdpZHRoOiAzNy41JTsNCn0NCg0KLmltZ2l0ZW17DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KfQ0KDQppbWd7DQoNCiAgd2lkdGg6IDEwMCU7DQogIG92ZXJmbG93OiBoaWRkZW47DQoNCn0NCg0KLmNvbnRhbnQgew0KICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICB3aWR0aDogNjIuNSU7DQogIHBhZGRpbmctbGVmdDogMzBweDsNCn0NCg0KDQouY2FyZCB7DQogIGhlaWdodDogMzAwcHg7DQogIHdpZHRoOiAxMDAlOw0KfQ0KDQouYXZhdGFyIHsNCiAgZmxvYXQ6IGxlZnQ7DQogIHdpZHRoOiAyMCU7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQoNCi50eHQgew0KICBmbG9hdDogbGVmdDsNCiAgbWFyZ2luLWxlZnQ6IDUwcHg7DQp9DQoNCi51c2VybmFtZSB7DQogIGhlaWdodDogMjVweDsNCiAgbGluZS1oZWlnaHQ6IDI1cHg7DQogIGNvbG9yOiBibGFjazsNCiAgbWFyZ2luLXRvcDogMTBweDsNCiAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtc2FtbGwpOw0KfQ0KDQouY2xhc3NlcyB7DQogIGhlaWdodDogNzVweDsNCiAgY29sb3I6IHZhcigtLWNvbG9yLWZvbnQpOw0KICBmb250LXNpemU6IHZhcigtLWZvbnQtc2l6ZS1zYW1sbCk7DQp9DQoNCi5kb21haW4gew0KICBoZWlnaHQ6IDI1cHg7DQogIGxpbmUtaGVpZ2h0OiAyNXB4Ow0KICBjb2xvcjogdmFyKC0tY29sb3ItZm9udCk7DQogIGZvbnQtc2l6ZTogdmFyKC0tZm9udC1zaXplLXNhbWxsKTsNCn0NCi5vcmRlclRleHR7DQogIG1hcmdpbi10b3A6IDEwcHg7DQogIG1hcmdpbi1sZWZ0OiAxMHB4Ow0KfQ0KLmJ1dHRvbnsNCiAgbWFyZ2luLXRvcDogMTBweDsNCiAgbWFyZ2luLWxlZnQ6IDEwcHg7DQp9DQo="},{"version":3,"sources":["OrderDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OrderDetail.vue","sourceRoot":"src/components/contant/order","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n    <div class=\"navbar\">\r\n      <el-row>\r\n        <el-col :span=\"20\" :offset=\"2\">\r\n          <search-result-nav-bar class=\"bar\" ></search-result-nav-bar>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    </el-row>\r\n    <header-back pageName=\"订单详情\"></header-back>\r\n    <el-row>\r\n  <div class=\"el-steps--horizontal\" >\r\n    <el-steps :align-center=\"true\" :space=\"500\" :active=\"showStatus\" finish-status=\"success\">\r\n      <el-step title=\"有意向\"></el-step>\r\n      <el-step title=\"发布者确认\"></el-step>\r\n      <el-step title=\"完成订单\"></el-step>\r\n    </el-steps>\r\n  </div>\r\n    </el-row>\r\n\r\n\r\n<el-row>\r\n  <div class=\"detail\"  v-if=\"!showFlag\">\r\n    <div class=\"img\">\r\n      <el-carousel trigger=\"click\">\r\n        <el-carousel-item v-for=\"item in classDetail.imgPath\" :key=\"item\">\r\n          <div class=\"imgitem\"><img :src=\"item\" alt=\"\"></div>\r\n        </el-carousel-item>\r\n      </el-carousel>\r\n    </div>\r\n    <div class=\"contant\">\r\n      <div class=\"title title-text\">{{classDetail.title}}</div>\r\n      <div class=\"score\">\r\n        <el-rate\r\n            v-model=\"classDetail.score.toString()\"\r\n            disabled\r\n            show-score\r\n            text-color=\"#ff9900\"\r\n            :score-template=\"classDetail.score.toString()\">\r\n        </el-rate>\r\n      </div>\r\n<!--      <div class=\"orderText\">交易价格：￥{{order.price}}</div>-->\r\n<!--      <div class=\"orderText\">课程时长：{{order.suggestTime}}(小时)</div>-->\r\n      <div class=\"price tag-text\" v-if=\"!sellerConform\">交易价格:￥{{order.price}}</div>\r\n      <div class=\"price tag-text\" v-if=\"sellerConform\"> 交易价格(元):￥<el-input style=\"width: 100px\" v-model=\"order.price\" @input=\"change($event)\" placeholder=\"\"></el-input></div>\r\n      <div class=\"time tag-text\" v-if=\"!sellerConform\">课程时长:{{order.suggestTime}}(小时)</div>\r\n      <div class=\"price tag-text\" v-if=\"sellerConform\"> 课程时长(小时):<el-input style=\"width: 100px\" v-model=\"order.suggestTime\" @input=\"change($event)\" placeholder=\"\"></el-input></div>\r\n      <div class=\"orderText\">课程介绍：{{classDetail.textIntro}}</div>\r\n      <div class=\"orderText\">前置知识：{{classDetail.frontKnowledge}}</div>\r\n      <div class=\"orderText\">教师：{{seller.username}}</div>\r\n      <div class=\"button\" v-if=\"sellerConform\"> <el-button type=\"primary\" plain @click=\"conformClass\">确认订单</el-button></div>\r\n      <div class=\"button\" v-if=\"buyerConfirm\"> <el-button type=\"primary\" plain @click=\"finishClass\">确认付款</el-button></div>\r\n      <div class=\"button\"> <el-button type=\"primary\" plain @click=\"detail\">详细信息</el-button></div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div class=\"detail\"  v-if=\"showFlag\">\r\n        <div class=\"img\">\r\n          <el-carousel trigger=\"click\">\r\n            <el-carousel-item v-for=\"item in question.imgPath\" :key=\"item\">\r\n              <div class=\"imgitem\"><img :src=\"item\" alt=\"\"></div>\r\n            </el-carousel-item>\r\n          </el-carousel>\r\n        </div>\r\n      <div class=\"contant\">\r\n        <div class=\"title title-text\">{{question.title}}</div>\r\n        <div class=\"orderText\" v-if=\"!sellerConform\">交易价格：￥{{order.price}}</div>\r\n        <div class=\"orderText\" v-if=\"sellerConform\"> 交易价格(元):￥<el-input style=\"width: 100px\" v-model=\"order.price\" placeholder=\"\"></el-input></div>\r\n        <div class=\"orderText\" v-if=\"!sellerConform\">课程时长：{{order.suggestTime}}(小时)</div>\r\n        <div class=\"orderTextt\" v-if=\"sellerConform\"> 课程时长(小时):<el-input style=\"width: 100px\" v-model=\"order.suggestTime\" placeholder=\"\"></el-input></div>\r\n        <div class=\"orderText\">课程介绍：{{question.textIntro}}</div>\r\n        <div class=\"orderText\">前置知识：{{question.frontKnowledge}}</div>\r\n        <div class=\"orderText\">教师：{{seller.username}}</div>\r\n        <div class=\"button\" v-if=\"sellerConform\"> <el-button type=\"primary\" plain @click=\"conformQuestion\">确认订单</el-button></div>\r\n        <div class=\"button\" v-if=\"buyerConfirm\"> <el-button type=\"primary\" plain @click=\"finishQuestion\">确认收款</el-button></div>\r\n        <div class=\"button\"> <el-button type=\"primary\" plain @click=\"detailQ\">详细信息</el-button></div>\r\n      </div>\r\n  </div>\r\n</el-row>\r\n\r\n\r\n    <el-row>\r\n          <el-col>\r\n\r\n            <el-card class=\"card\" shadow=\"hover\" body-style=\"{display:flex;}\">\r\n              <h3>发布者</h3>\r\n              <div class=\"avatar\"><img :src=\"seller.userImg\" alt=\"\"></div>\r\n              <div class=\"txt\">\r\n                <div class=\"username\">用户名: {{seller.username}}</div>\r\n                <div class=\"username\" v-if=\"seller.sex === 2\">性别: 女</div>\r\n                <div class=\"username\" v-if=\"seller.sex === 1\">性别: 男</div>\r\n                <div class=\"username\">擅长领域: {{seller.domainText}}</div>\r\n                <div class=\"username\">自我介绍: {{seller.selfIntro}}</div>\r\n                <div class=\"button\"> <el-button type=\"primary\" @click=\"checkOthers\" plain>进入主页</el-button></div>\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n          <el-col>\r\n\r\n            <el-card class=\"card\" shadow=\"hover\" body-style=\"{display:flex;}\">\r\n              <h3>购买者</h3>\r\n              <div class=\"avatar\"><img :src=\"buyer.userImg\" alt=\"\"></div>\r\n              <div class=\"txt\">\r\n                <div class=\"username\">用户名: {{buyer.username}}</div>\r\n                <div class=\"username\" v-if=\"buyer.sex === 2\">性别: 女</div>\r\n                <div class=\"username\" v-if=\"buyer.sex === 1\">性别: 男</div>\r\n                <div class=\"username\">擅长领域: {{buyer.domainText}}</div>\r\n                <div class=\"username\">自我介绍: {{buyer.selfIntro}}</div>\r\n                <div class=\"button\"> <el-button type=\"primary\" @click=\"checkOthers\" plain>进入主页</el-button></div>\r\n              </div>\r\n            </el-card>\r\n          </el-col>\r\n    </el-row>\r\n\r\n\r\n    <el-row>\r\n      <div v-if=\"showEvaluation\">\r\n        <h2>请输入您对订单的评价</h2>\r\n        <el-row>\r\n          <el-input\r\n              ref=\"input\"\r\n              type=\"textarea\"\r\n              placeholder=\"请输入评价\"\r\n              v-model=\"textarea\"\r\n              maxlength=\"300\"\r\n              show-word-limit\r\n              :clearable=\"true\"\r\n              :rows=\"5\"\r\n          >\r\n          </el-input>\r\n        </el-row>\r\n        <el-row>\r\n          <el-button @click=\"sendComment\" style=\"margin-left: 92%;margin-top: 10px\" type=\"primary\">发送</el-button>\r\n        </el-row>\r\n      </div>\r\n      <div>\r\n        <div class=\"list\" v-if=\"showList\">\r\n          <h2>我的评价</h2>\r\n          <evaluation :data=\"evaluationVo\"></evaluation>\r\n        </div>\r\n      </div>\r\n    </el-row>\r\n\r\n\r\n<!--  <div>-->\r\n<!--    <big-class-card></big-class-card>-->\r\n<!--  </div>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  confirmC,\r\n  confirmClass,\r\n  confirmQ,\r\n  finishC,\r\n  finishQ,\r\n  postEvaluation,\r\n  showOrder,\r\n  showOrderQ\r\n} from \"../../../network/Order\";\r\nimport BigClassCard from \"../class/BigClassCard\";\r\nimport SearchResultNavBar from \"../../../views/searchResult/childComponents/SearchResultNavBar\";\r\nimport HeaderBack from \"../back/HeaderBack\";\r\nimport {sendComment} from \"../../../network/comment\";\r\nimport evaluation from \"../comment/Evaluation\";\r\nexport default {\r\n  name:\"OrderDetail\",\r\n  data() {\r\n    return {\r\n      orderTitle:\"订单信息\",\r\n      active: 0,\r\n      //0 购买者  1  卖家\r\n      position:0,\r\n      order:{},\r\n      seller:{},\r\n      buyer:{},\r\n      classDetail:{},\r\n      //0--课程 1--提问\r\n      flag:null,\r\n      question:{},\r\n      id: 0,\r\n      textarea:\"\",\r\n      evaluationVo:null\r\n    };\r\n  },\r\n  created() {\r\n    this.id = parseInt(this.$route.query.order_id);\r\n    this.flag = parseInt(this.$route.query.flag);\r\n    this.position = parseInt(this.$route.query.position);\r\n    this.loadData(this.flag);\r\n  },\r\n  components:{\r\n    BigClassCard,\r\n    SearchResultNavBar,\r\n    HeaderBack,\r\n    evaluation\r\n  },\r\n  computed:{\r\n\r\n    //是卖家并且订单状态为0\r\n    sellerConform(){\r\n      if(parseInt(this.order.orderStatus) === 0 && this.position === 1){\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    showStatus(){\r\n      return  parseInt(this.order.orderStatus)+1;\r\n    },\r\n    //课程还是提问\r\n    showFlag(){\r\n     if(this.flag === 0){\r\n       return false;\r\n     }\r\n     else{\r\n       return true;\r\n     }\r\n    },\r\n    //是否显示评价\r\n    showEvaluation(){\r\n      console.log(this.evaluationVo)\r\n      if(this.evaluationVo === null){\r\n        return false;\r\n      }\r\n      //状态为已结束,为买家，评价为空才显示\r\n      if(parseInt(this.order.orderStatus) === 2 && this.position === 0 && this.evaluationVo.evaluation === null && this.flag === 0){\r\n        return true;\r\n      }\r\n      else{\r\n        return false;\r\n      }\r\n    },\r\n    buyerConfirm(){\r\n      if(parseInt(this.order.orderStatus) === 1 && this.position === 0){\r\n        return true;\r\n      }\r\n    },\r\n    //评价不为空就显示\r\n    showList(){\r\n      if(this.evaluationVo === null){\r\n        return false;\r\n      }\r\n      if(this.evaluationVo.evaluation !== null){\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n  },\r\n  methods: {\r\n    detail(){\r\n      this.$router.push({path:'/class',query:{class_id:this.classDetail.id,canChange:0}})\r\n    },\r\n    detailQ(){\r\n      console.log(this.classDetail);\r\n      this.$router.push({path:'/question',query:{question_id:this.question.id,canChange:0}})\r\n    },\r\n    change(e){\r\n      this.$forceUpdate();\r\n    },\r\n    finishClass(){\r\n      finishC(this.order.id).then((res)=>{\r\n        this.$message({\r\n          type:\"success\",\r\n          message:`成功确认!`\r\n        })\r\n        this.loadData();\r\n        location.reload();\r\n      })\r\n    },\r\n    finishQuestion(){\r\n      finishQ(this.order.id).then((res)=>{\r\n        this.$message({\r\n          type:\"success\",\r\n          message:`成功确认!`\r\n        })\r\n        this.loadData()\r\n        location.reload();\r\n      })\r\n    },\r\n    conformClass(){\r\n      confirmC(this.order.id,this.order.price,this.order.suggestTime).then((res)=>{\r\n        this.$message({\r\n          type:\"success\",\r\n          message:`订单成功确认!`\r\n        })\r\n        this.loadData()\r\n        location.reload();\r\n      })\r\n    },\r\n    conformQuestion(){\r\n      confirmQ(this.order.id,this.order.price,this.order.suggestTime).then((res)=>{\r\n        this.$message({\r\n          type:\"success\",\r\n          message:`订单成功确认!`\r\n        })\r\n        this.loadData()\r\n        location.reload();\r\n      })\r\n    },\r\n    sendComment(){\r\n      postEvaluation(this.textarea,this.order.id).then((res)=>{\r\n        this.$message({\r\n          type:\"success\",\r\n          message:`发布评价成功!`\r\n        })\r\n        this.textarea = \"\";\r\n\r\n      })\r\n      location.reload();\r\n    },\r\n    checkOthers(){\r\n      this.$router.push({path:'/mainMenu',query:{id:this.seller.id}})\r\n    },\r\n    next() {\r\n      if (this.active++ > 2) this.active = 0;\r\n    },\r\n    loadData(flag){\r\n      const that = this;\r\n      console.log(flag)\r\n      if(flag === 0){\r\n        showOrder(that.id).then((res)=>{\r\n          that.order = res.data.order_;\r\n          console.log(that.order);\r\n          that.buyer = res.data.buyer;\r\n          that.seller = res.data.seller;\r\n          that.classDetail = res.data.classInfo;\r\n          this.evaluationVo= res.data.evaluationVo;\r\n          console.log(res)\r\n        })\r\n      }\r\n      else{\r\n        showOrderQ(that.id).then((res)=>{\r\n          that.order = res.data.orderQ;\r\n          console.log(that.order);\r\n          that.buyer = res.data.buyer;\r\n          that.seller = res.data.seller;\r\n          that.question = res.data.question;\r\n          console.log(res)\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.navbar {\r\n  height: 80px;\r\n  width: 100%;\r\n  background-color: black;\r\n}\r\n.detail{\r\n  display: flex;\r\n  margin-top: 45px;\r\n  padding: 20px 20px;\r\n  background-color: white;\r\n  box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\r\n}\r\n\r\n.img {\r\n  width: 37.5%;\r\n}\r\n\r\n.imgitem{\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\nimg{\r\n\r\n  width: 100%;\r\n  overflow: hidden;\r\n\r\n}\r\n\r\n.contant {\r\n  box-sizing: border-box;\r\n  width: 62.5%;\r\n  padding-left: 30px;\r\n}\r\n\r\n\r\n.card {\r\n  height: 300px;\r\n  width: 100%;\r\n}\r\n\r\n.avatar {\r\n  float: left;\r\n  width: 20%;\r\n  overflow: hidden;\r\n}\r\n\r\n.txt {\r\n  float: left;\r\n  margin-left: 50px;\r\n}\r\n\r\n.username {\r\n  height: 25px;\r\n  line-height: 25px;\r\n  color: black;\r\n  margin-top: 10px;\r\n  font-size: var(--font-size-samll);\r\n}\r\n\r\n.classes {\r\n  height: 75px;\r\n  color: var(--color-font);\r\n  font-size: var(--font-size-samll);\r\n}\r\n\r\n.domain {\r\n  height: 25px;\r\n  line-height: 25px;\r\n  color: var(--color-font);\r\n  font-size: var(--font-size-samll);\r\n}\r\n.orderText{\r\n  margin-top: 10px;\r\n  margin-left: 10px;\r\n}\r\n.button{\r\n  margin-top: 10px;\r\n  margin-left: 10px;\r\n}\r\n</style>"]}]}