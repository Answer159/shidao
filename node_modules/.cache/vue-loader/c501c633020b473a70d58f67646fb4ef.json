{"remainingRequest":"D:\\DownLoad\\shidao-vue-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DownLoad\\shidao-vue-master\\src\\components\\contant\\collect\\CollectButton.vue?vue&type=style&index=0&id=96fbfd86&scoped=true&lang=css&","dependencies":[{"path":"D:\\DownLoad\\shidao-vue-master\\src\\components\\contant\\collect\\CollectButton.vue","mtime":1646277929409},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\css-loader\\dist\\cjs.js","mtime":1649392171533},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1649392175068},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\postcss-loader\\src\\index.js","mtime":1649392172459},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1649392170894},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1649392173647}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY29sbGVjdHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgY3Vyc29yOiBwb2ludGVyOwogIHJpZ2h0OiAyMCU7CiAgaGVpZ2h0OiA0MHB4OwogIGxpbmUtaGVpZ2h0OiA0MHB4OwogIHBhZGRpbmc6IDAgNXB4OwogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIGZvbnQtc2l6ZTogdmFyKC0tZm9udC1zaXplLXZlcnktYmlnKTsKfQoKLmlzQ3sKICBjb2xvcjogcmdiKDI0NywgMTg2LCA0Mik7Cn0KCgo="},{"version":3,"sources":["CollectButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"CollectButton.vue","sourceRoot":"src/components/contant/collect","sourcesContent":["<template>\n  <div class=\"collect\" @click=\"ButtonClick\" >\n      <i v-if=\"isCollect === false\" class=\"el-icon-star-off\"></i>\n      <i v-if=\"isCollect === true\" class=\"el-icon-star-on isC\"></i>\n  </div>\n</template>\n\n<script>\nimport {CollectClass,CancelCollectClass,CollectQuestion,CancelCollectQuestion} from '../../../network/collect';\nimport { UpdateLocal } from '../../../network/user'\nexport default {\n  name:\"CollectButton\",\n  props:{\n    questionId:null,\n    classId:null,\n  },\n  data(){\n    return{\n      isCollect:false,\n      isLogin:true\n    }\n  },\n  methods:{\n    IsCollected(){\n      console.log(this.$store.state.userData.collectionQuestion)\n      if(this.isLogin === false){\n        console.log(\"!\")\n        return false;\n      }\n      else if((this.classId!==null&&this.classId!==undefined)&&this.$store.state.userData.collectionClass === null){\n        console.log(\"?\")\n        return false;\n      }\n      else if((this.questionId!==null&&this.questionId!==undefined)&&this.$store.state.userData.collectionQuestion === null){\n        console.log(\"??\")\n      return false;\n    }\n      let flag = false;\n      console.log(this.classId)\n      console.log(this.questionId)\n      if(this.classId !== null&&this.classId !== undefined){\n        console.log(\"???\")\n        let collectClass =  this.$store.state.userData.collectionClass;\n        console.log(this.$store.state.userData.collectionClass)\n        const that=this;\n        let  arrayClass = collectClass.split(\"&\");\n        console.log(arrayClass);\n        arrayClass.forEach(function (value){\n          console.log(value);\n          console.log(that.classId+\"\");\n          if(value === that.classId+\"\"){\n           flag = true\n          return true;\n          }\n        });\n      }\n  \n      if(this.questionId !== null&&this.questionId !== undefined){\n        console.log(this.questionId)\n        const that=this;\n        let collectQuestion =  this.$store.state.userData.collectionQuestion;\n        let  arrayQuestion = collectQuestion.split(\"&\");\n        arrayQuestion.forEach(function (value){\n          console.log(value);\n          console.log(that.questionId+\"\");\n          if(value === that.questionId+\"\"){\n            flag = true\n            return true;\n          }\n        });\n        // arrayQuestion.forEach(element => {\n        //   console.log(value);\n        //   console.log(that.classId+\"\");\n        //   if(element === this.questionId){\n        //      flag = true\n        //     return true;\n        //   }\n        // });\n      }       \n      this.isCollect = flag;\n      return flag;      \n    },\n\n    ButtonClick(){\n      if(this.isLogin === false){\n        this.$message({\n          type:\"error\",\n          message:\"登录后即可收藏,请先登录！\"\n        })\n        return;\n      } \n      if(this.classId != null){\n        this.ClassClick();\n        return;\n      }\n      if(this.questionId != null){\n        this.QuestionClick();\n        return;\n      }\n    },\n\n    ClassClick(){\n        if(this.isCollect === true){\n        //发送取消收藏请求\n        CancelCollectClass(this.classId).then((res)=>{\n          if(res.data.msg === \"success\"){\n            UpdateLocal();\n            this.isCollect = false;   \n               \n          }\n          if(res.data.msg=== \"fail\"){\n            this.$message({\n              type:\"error\",\n              message:\"取消收藏失败，请重试！\"\n            })\n          }\n\n        })\n        \n        \n      }else{\n        //发送收藏请求\n        CollectClass(this.classId).then((res)=>{\n          if(res.data.msg=== \"success\"){\n            UpdateLocal();\n            this.isCollect = true;   \n               \n          }\n          if(res.data.msg=== \"fail\"){\n            this.$message({\n              type:\"error\",\n              message:\"收藏失败，请重试！\"\n            })\n          }\n           if(res.data.msg === \"课程已收藏\"){\n            UpdateLocal();        \n          }\n          \n        })\n          \n      }\n    },\n\n    QuestionClick(){\n      if(this.isCollect === true){\n      //发送取消收藏请求\n        console.log(this.questionId)\n      CancelCollectQuestion(this.questionId);\n        UpdateLocal();\n        this.isCollect = false;\n      }else{\n        //发送收藏请求\n        CollectQuestion(this.questionId);\n        UpdateLocal();\n        this.isCollect = true;\n      }\n    },\n\n    IsLogin(){\n      if(this.$store.state.login === 0){\n        this.isLogin = false;\n        return false;\n      }else{\n        this.isLogin = true;\n        return true;\n      }\n    }\n  },\n\n  mounted(){\n     \n    if(this.IsLogin()){\n       this.IsCollected();\n       console.log(this.isCollect);\n    } \n  },\n\n}\n</script>\n\n<style scoped>\n\n.collect{\n  position: absolute;\n  cursor: pointer;\n  right: 20%;\n  height: 40px;\n  line-height: 40px;\n  padding: 0 5px;\n  border: 1px solid var(--color-border);\n  border-radius: 5px;\n  font-size: var(--font-size-very-big);\n}\n\n.isC{\n  color: rgb(247, 186, 42);\n}\n\n\n</style>"]}]}