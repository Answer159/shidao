{"remainingRequest":"D:\\DownLoad\\shidao-vue-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DownLoad\\shidao-vue-master\\src\\components\\contant\\collect\\CollectButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DownLoad\\shidao-vue-master\\src\\components\\contant\\collect\\CollectButton.vue","mtime":1646277929409},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1644821604128},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1644821604590},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1644821604128},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1644821589111}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Q29sbGVjdENsYXNzLENhbmNlbENvbGxlY3RDbGFzcyxDb2xsZWN0UXVlc3Rpb24sQ2FuY2VsQ29sbGVjdFF1ZXN0aW9ufSBmcm9tICcuLi8uLi8uLi9uZXR3b3JrL2NvbGxlY3QnOwppbXBvcnQgeyBVcGRhdGVMb2NhbCB9IGZyb20gJy4uLy4uLy4uL25ldHdvcmsvdXNlcicKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6IkNvbGxlY3RCdXR0b24iLAogIHByb3BzOnsKICAgIHF1ZXN0aW9uSWQ6bnVsbCwKICAgIGNsYXNzSWQ6bnVsbCwKICB9LAogIGRhdGEoKXsKICAgIHJldHVybnsKICAgICAgaXNDb2xsZWN0OmZhbHNlLAogICAgICBpc0xvZ2luOnRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgSXNDb2xsZWN0ZWQoKXsKICAgICAgY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUudXNlckRhdGEuY29sbGVjdGlvblF1ZXN0aW9uKQogICAgICBpZih0aGlzLmlzTG9naW4gPT09IGZhbHNlKXsKICAgICAgICBjb25zb2xlLmxvZygiISIpCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGVsc2UgaWYoKHRoaXMuY2xhc3NJZCE9PW51bGwmJnRoaXMuY2xhc3NJZCE9PXVuZGVmaW5lZCkmJnRoaXMuJHN0b3JlLnN0YXRlLnVzZXJEYXRhLmNvbGxlY3Rpb25DbGFzcyA9PT0gbnVsbCl7CiAgICAgICAgY29uc29sZS5sb2coIj8iKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBlbHNlIGlmKCh0aGlzLnF1ZXN0aW9uSWQhPT1udWxsJiZ0aGlzLnF1ZXN0aW9uSWQhPT11bmRlZmluZWQpJiZ0aGlzLiRzdG9yZS5zdGF0ZS51c2VyRGF0YS5jb2xsZWN0aW9uUXVlc3Rpb24gPT09IG51bGwpewogICAgICAgIGNvbnNvbGUubG9nKCI/PyIpCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgICAgbGV0IGZsYWcgPSBmYWxzZTsKICAgICAgY29uc29sZS5sb2codGhpcy5jbGFzc0lkKQogICAgICBjb25zb2xlLmxvZyh0aGlzLnF1ZXN0aW9uSWQpCiAgICAgIGlmKHRoaXMuY2xhc3NJZCAhPT0gbnVsbCYmdGhpcy5jbGFzc0lkICE9PSB1bmRlZmluZWQpewogICAgICAgIGNvbnNvbGUubG9nKCI/Pz8iKQogICAgICAgIGxldCBjb2xsZWN0Q2xhc3MgPSAgdGhpcy4kc3RvcmUuc3RhdGUudXNlckRhdGEuY29sbGVjdGlvbkNsYXNzOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJEYXRhLmNvbGxlY3Rpb25DbGFzcykKICAgICAgICBjb25zdCB0aGF0PXRoaXM7CiAgICAgICAgbGV0ICBhcnJheUNsYXNzID0gY29sbGVjdENsYXNzLnNwbGl0KCImIik7CiAgICAgICAgY29uc29sZS5sb2coYXJyYXlDbGFzcyk7CiAgICAgICAgYXJyYXlDbGFzcy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSl7CiAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGF0LmNsYXNzSWQrIiIpOwogICAgICAgICAgaWYodmFsdWUgPT09IHRoYXQuY2xhc3NJZCsiIil7CiAgICAgICAgICAgZmxhZyA9IHRydWUKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgCiAgICAgIGlmKHRoaXMucXVlc3Rpb25JZCAhPT0gbnVsbCYmdGhpcy5xdWVzdGlvbklkICE9PSB1bmRlZmluZWQpewogICAgICAgIGNvbnNvbGUubG9nKHRoaXMucXVlc3Rpb25JZCkKICAgICAgICBjb25zdCB0aGF0PXRoaXM7CiAgICAgICAgbGV0IGNvbGxlY3RRdWVzdGlvbiA9ICB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyRGF0YS5jb2xsZWN0aW9uUXVlc3Rpb247CiAgICAgICAgbGV0ICBhcnJheVF1ZXN0aW9uID0gY29sbGVjdFF1ZXN0aW9uLnNwbGl0KCImIik7CiAgICAgICAgYXJyYXlRdWVzdGlvbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSl7CiAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGF0LnF1ZXN0aW9uSWQrIiIpOwogICAgICAgICAgaWYodmFsdWUgPT09IHRoYXQucXVlc3Rpb25JZCsiIil7CiAgICAgICAgICAgIGZsYWcgPSB0cnVlCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIGFycmF5UXVlc3Rpb24uZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHZhbHVlKTsKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHRoYXQuY2xhc3NJZCsiIik7CiAgICAgICAgLy8gICBpZihlbGVtZW50ID09PSB0aGlzLnF1ZXN0aW9uSWQpewogICAgICAgIC8vICAgICAgZmxhZyA9IHRydWUKICAgICAgICAvLyAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgLy8gICB9CiAgICAgICAgLy8gfSk7CiAgICAgIH0gICAgICAgCiAgICAgIHRoaXMuaXNDb2xsZWN0ID0gZmxhZzsKICAgICAgcmV0dXJuIGZsYWc7ICAgICAgCiAgICB9LAoKICAgIEJ1dHRvbkNsaWNrKCl7CiAgICAgIGlmKHRoaXMuaXNMb2dpbiA9PT0gZmFsc2UpewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZToiZXJyb3IiLAogICAgICAgICAgbWVzc2FnZToi55m75b2V5ZCO5Y2z5Y+v5pS26JePLOivt+WFiOeZu+W9le+8gSIKICAgICAgICB9KQogICAgICAgIHJldHVybjsKICAgICAgfSAKICAgICAgaWYodGhpcy5jbGFzc0lkICE9IG51bGwpewogICAgICAgIHRoaXMuQ2xhc3NDbGljaygpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZih0aGlzLnF1ZXN0aW9uSWQgIT0gbnVsbCl7CiAgICAgICAgdGhpcy5RdWVzdGlvbkNsaWNrKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAoKICAgIENsYXNzQ2xpY2soKXsKICAgICAgICBpZih0aGlzLmlzQ29sbGVjdCA9PT0gdHJ1ZSl7CiAgICAgICAgLy/lj5HpgIHlj5bmtojmlLbol4/or7fmsYIKICAgICAgICBDYW5jZWxDb2xsZWN0Q2xhc3ModGhpcy5jbGFzc0lkKS50aGVuKChyZXMpPT57CiAgICAgICAgICBpZihyZXMuZGF0YS5tc2cgPT09ICJzdWNjZXNzIil7CiAgICAgICAgICAgIFVwZGF0ZUxvY2FsKCk7CiAgICAgICAgICAgIHRoaXMuaXNDb2xsZWN0ID0gZmFsc2U7ICAgCiAgICAgICAgICAgICAgIAogICAgICAgICAgfQogICAgICAgICAgaWYocmVzLmRhdGEubXNnPT09ICJmYWlsIil7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ImVycm9yIiwKICAgICAgICAgICAgICBtZXNzYWdlOiLlj5bmtojmlLbol4/lpLHotKXvvIzor7fph43or5XvvIEiCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CgogICAgICAgIH0pCiAgICAgICAgCiAgICAgICAgCiAgICAgIH1lbHNlewogICAgICAgIC8v5Y+R6YCB5pS26JeP6K+35rGCCiAgICAgICAgQ29sbGVjdENsYXNzKHRoaXMuY2xhc3NJZCkudGhlbigocmVzKT0+ewogICAgICAgICAgaWYocmVzLmRhdGEubXNnPT09ICJzdWNjZXNzIil7CiAgICAgICAgICAgIFVwZGF0ZUxvY2FsKCk7CiAgICAgICAgICAgIHRoaXMuaXNDb2xsZWN0ID0gdHJ1ZTsgICAKICAgICAgICAgICAgICAgCiAgICAgICAgICB9CiAgICAgICAgICBpZihyZXMuZGF0YS5tc2c9PT0gImZhaWwiKXsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZToiZXJyb3IiLAogICAgICAgICAgICAgIG1lc3NhZ2U6IuaUtuiXj+Wksei0pe+8jOivt+mHjeivle+8gSIKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICAgICBpZihyZXMuZGF0YS5tc2cgPT09ICLor77nqIvlt7LmlLbol48iKXsKICAgICAgICAgICAgVXBkYXRlTG9jYWwoKTsgICAgICAgIAogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgfSkKICAgICAgICAgIAogICAgICB9CiAgICB9LAoKICAgIFF1ZXN0aW9uQ2xpY2soKXsKICAgICAgaWYodGhpcy5pc0NvbGxlY3QgPT09IHRydWUpewogICAgICAvL+WPkemAgeWPlua2iOaUtuiXj+ivt+axggogICAgICAgIGNvbnNvbGUubG9nKHRoaXMucXVlc3Rpb25JZCkKICAgICAgQ2FuY2VsQ29sbGVjdFF1ZXN0aW9uKHRoaXMucXVlc3Rpb25JZCk7CiAgICAgICAgVXBkYXRlTG9jYWwoKTsKICAgICAgICB0aGlzLmlzQ29sbGVjdCA9IGZhbHNlOwogICAgICB9ZWxzZXsKICAgICAgICAvL+WPkemAgeaUtuiXj+ivt+axggogICAgICAgIENvbGxlY3RRdWVzdGlvbih0aGlzLnF1ZXN0aW9uSWQpOwogICAgICAgIFVwZGF0ZUxvY2FsKCk7CiAgICAgICAgdGhpcy5pc0NvbGxlY3QgPSB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIElzTG9naW4oKXsKICAgICAgaWYodGhpcy4kc3RvcmUuc3RhdGUubG9naW4gPT09IDApewogICAgICAgIHRoaXMuaXNMb2dpbiA9IGZhbHNlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5pc0xvZ2luID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQogIH0sCgogIG1vdW50ZWQoKXsKICAgICAKICAgIGlmKHRoaXMuSXNMb2dpbigpKXsKICAgICAgIHRoaXMuSXNDb2xsZWN0ZWQoKTsKICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXNDb2xsZWN0KTsKICAgIH0gCiAgfSwKCn0K"},{"version":3,"sources":["CollectButton.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"CollectButton.vue","sourceRoot":"src/components/contant/collect","sourcesContent":["<template>\n  <div class=\"collect\" @click=\"ButtonClick\" >\n      <i v-if=\"isCollect === false\" class=\"el-icon-star-off\"></i>\n      <i v-if=\"isCollect === true\" class=\"el-icon-star-on isC\"></i>\n  </div>\n</template>\n\n<script>\nimport {CollectClass,CancelCollectClass,CollectQuestion,CancelCollectQuestion} from '../../../network/collect';\nimport { UpdateLocal } from '../../../network/user'\nexport default {\n  name:\"CollectButton\",\n  props:{\n    questionId:null,\n    classId:null,\n  },\n  data(){\n    return{\n      isCollect:false,\n      isLogin:true\n    }\n  },\n  methods:{\n    IsCollected(){\n      console.log(this.$store.state.userData.collectionQuestion)\n      if(this.isLogin === false){\n        console.log(\"!\")\n        return false;\n      }\n      else if((this.classId!==null&&this.classId!==undefined)&&this.$store.state.userData.collectionClass === null){\n        console.log(\"?\")\n        return false;\n      }\n      else if((this.questionId!==null&&this.questionId!==undefined)&&this.$store.state.userData.collectionQuestion === null){\n        console.log(\"??\")\n      return false;\n    }\n      let flag = false;\n      console.log(this.classId)\n      console.log(this.questionId)\n      if(this.classId !== null&&this.classId !== undefined){\n        console.log(\"???\")\n        let collectClass =  this.$store.state.userData.collectionClass;\n        console.log(this.$store.state.userData.collectionClass)\n        const that=this;\n        let  arrayClass = collectClass.split(\"&\");\n        console.log(arrayClass);\n        arrayClass.forEach(function (value){\n          console.log(value);\n          console.log(that.classId+\"\");\n          if(value === that.classId+\"\"){\n           flag = true\n          return true;\n          }\n        });\n      }\n  \n      if(this.questionId !== null&&this.questionId !== undefined){\n        console.log(this.questionId)\n        const that=this;\n        let collectQuestion =  this.$store.state.userData.collectionQuestion;\n        let  arrayQuestion = collectQuestion.split(\"&\");\n        arrayQuestion.forEach(function (value){\n          console.log(value);\n          console.log(that.questionId+\"\");\n          if(value === that.questionId+\"\"){\n            flag = true\n            return true;\n          }\n        });\n        // arrayQuestion.forEach(element => {\n        //   console.log(value);\n        //   console.log(that.classId+\"\");\n        //   if(element === this.questionId){\n        //      flag = true\n        //     return true;\n        //   }\n        // });\n      }       \n      this.isCollect = flag;\n      return flag;      \n    },\n\n    ButtonClick(){\n      if(this.isLogin === false){\n        this.$message({\n          type:\"error\",\n          message:\"登录后即可收藏,请先登录！\"\n        })\n        return;\n      } \n      if(this.classId != null){\n        this.ClassClick();\n        return;\n      }\n      if(this.questionId != null){\n        this.QuestionClick();\n        return;\n      }\n    },\n\n    ClassClick(){\n        if(this.isCollect === true){\n        //发送取消收藏请求\n        CancelCollectClass(this.classId).then((res)=>{\n          if(res.data.msg === \"success\"){\n            UpdateLocal();\n            this.isCollect = false;   \n               \n          }\n          if(res.data.msg=== \"fail\"){\n            this.$message({\n              type:\"error\",\n              message:\"取消收藏失败，请重试！\"\n            })\n          }\n\n        })\n        \n        \n      }else{\n        //发送收藏请求\n        CollectClass(this.classId).then((res)=>{\n          if(res.data.msg=== \"success\"){\n            UpdateLocal();\n            this.isCollect = true;   \n               \n          }\n          if(res.data.msg=== \"fail\"){\n            this.$message({\n              type:\"error\",\n              message:\"收藏失败，请重试！\"\n            })\n          }\n           if(res.data.msg === \"课程已收藏\"){\n            UpdateLocal();        \n          }\n          \n        })\n          \n      }\n    },\n\n    QuestionClick(){\n      if(this.isCollect === true){\n      //发送取消收藏请求\n        console.log(this.questionId)\n      CancelCollectQuestion(this.questionId);\n        UpdateLocal();\n        this.isCollect = false;\n      }else{\n        //发送收藏请求\n        CollectQuestion(this.questionId);\n        UpdateLocal();\n        this.isCollect = true;\n      }\n    },\n\n    IsLogin(){\n      if(this.$store.state.login === 0){\n        this.isLogin = false;\n        return false;\n      }else{\n        this.isLogin = true;\n        return true;\n      }\n    }\n  },\n\n  mounted(){\n     \n    if(this.IsLogin()){\n       this.IsCollected();\n       console.log(this.isCollect);\n    } \n  },\n\n}\n</script>\n\n<style scoped>\n\n.collect{\n  position: absolute;\n  cursor: pointer;\n  right: 20%;\n  height: 40px;\n  line-height: 40px;\n  padding: 0 5px;\n  border: 1px solid var(--color-border);\n  border-radius: 5px;\n  font-size: var(--font-size-very-big);\n}\n\n.isC{\n  color: rgb(247, 186, 42);\n}\n\n\n</style>"]}]}