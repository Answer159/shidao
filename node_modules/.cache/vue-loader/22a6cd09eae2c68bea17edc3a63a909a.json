{"remainingRequest":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\src\\components\\contant\\collect\\CollectButton.vue?vue&type=style&index=0&id=96fbfd86&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\src\\components\\contant\\collect\\CollectButton.vue","mtime":1650696352027},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\css-loader\\dist\\cjs.js","mtime":1650696340241},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1650696350603},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\postcss-loader\\src\\index.js","mtime":1650696347248},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650696337516},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\vue-loader\\lib\\index.js","mtime":1650696350603}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoNCi5jb2xsZWN0ew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgcmlnaHQ6IDIwJTsNCiAgaGVpZ2h0OiA0MHB4Ow0KICBsaW5lLWhlaWdodDogNDBweDsNCiAgcGFkZGluZzogMCA1cHg7DQogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWJvcmRlcik7DQogIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgZm9udC1zaXplOiB2YXIoLS1mb250LXNpemUtdmVyeS1iaWcpOw0KfQ0KDQouaXNDew0KICBjb2xvcjogcmdiKDI0NywgMTg2LCA0Mik7DQp9DQoNCg0K"},{"version":3,"sources":["CollectButton.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"CollectButton.vue","sourceRoot":"src/components/contant/collect","sourcesContent":["<template>\r\n  <div class=\"collect\" @click=\"ButtonClick\" >\r\n      <i v-if=\"isCollect === false\" class=\"el-icon-star-off\"></i>\r\n      <i v-if=\"isCollect === true\" class=\"el-icon-star-on isC\"></i>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {CollectClass,CancelCollectClass,CollectQuestion,CancelCollectQuestion} from '../../../network/collect';\r\nimport { UpdateLocal } from '../../../network/user'\r\nexport default {\r\n  name:\"CollectButton\",\r\n  props:{\r\n    questionId:null,\r\n    classId:null,\r\n  },\r\n  data(){\r\n    return{\r\n      isCollect:false,\r\n      isLogin:true\r\n    }\r\n  },\r\n  methods:{\r\n    IsCollected(){\r\n      console.log(this.$store.state.userData.collectionQuestion)\r\n      if(this.isLogin === false){\r\n        console.log(\"!\")\r\n        return false;\r\n      }\r\n      else if((this.classId!==null&&this.classId!==undefined)&&this.$store.state.userData.collectionClass === null){\r\n        console.log(\"?\")\r\n        return false;\r\n      }\r\n      else if((this.questionId!==null&&this.questionId!==undefined)&&this.$store.state.userData.collectionQuestion === null){\r\n        console.log(\"??\")\r\n      return false;\r\n    }\r\n      let flag = false;\r\n      console.log(this.classId)\r\n      console.log(this.questionId)\r\n      if(this.classId !== null&&this.classId !== undefined){\r\n        console.log(\"???\")\r\n        let collectClass =  this.$store.state.userData.collectionClass;\r\n        console.log(this.$store.state.userData.collectionClass)\r\n        const that=this;\r\n        let  arrayClass = collectClass.split(\"&\");\r\n        console.log(arrayClass);\r\n        arrayClass.forEach(function (value){\r\n          console.log(value);\r\n          console.log(that.classId+\"\");\r\n          if(value === that.classId+\"\"){\r\n           flag = true\r\n          return true;\r\n          }\r\n        });\r\n      }\r\n  \r\n      if(this.questionId !== null&&this.questionId !== undefined){\r\n        console.log(this.questionId)\r\n        const that=this;\r\n        let collectQuestion =  this.$store.state.userData.collectionQuestion;\r\n        let  arrayQuestion = collectQuestion.split(\"&\");\r\n        arrayQuestion.forEach(function (value){\r\n          console.log(value);\r\n          console.log(that.questionId+\"\");\r\n          if(value === that.questionId+\"\"){\r\n            flag = true\r\n            return true;\r\n          }\r\n        });\r\n        // arrayQuestion.forEach(element => {\r\n        //   console.log(value);\r\n        //   console.log(that.classId+\"\");\r\n        //   if(element === this.questionId){\r\n        //      flag = true\r\n        //     return true;\r\n        //   }\r\n        // });\r\n      }       \r\n      this.isCollect = flag;\r\n      return flag;      \r\n    },\r\n\r\n    ButtonClick(){\r\n      if(this.isLogin === false){\r\n        this.$message({\r\n          type:\"error\",\r\n          message:\"登录后即可收藏,请先登录！\"\r\n        })\r\n        return;\r\n      } \r\n      if(this.classId != null){\r\n        this.ClassClick();\r\n        return;\r\n      }\r\n      if(this.questionId != null){\r\n        this.QuestionClick();\r\n        return;\r\n      }\r\n    },\r\n\r\n    ClassClick(){\r\n        if(this.isCollect === true){\r\n        //发送取消收藏请求\r\n        CancelCollectClass(this.classId).then((res)=>{\r\n          if(res.data.msg === \"success\"){\r\n            UpdateLocal();\r\n            this.isCollect = false;   \r\n               \r\n          }\r\n          if(res.data.msg=== \"fail\"){\r\n            this.$message({\r\n              type:\"error\",\r\n              message:\"取消收藏失败，请重试！\"\r\n            })\r\n          }\r\n\r\n        })\r\n        \r\n        \r\n      }else{\r\n        //发送收藏请求\r\n        CollectClass(this.classId).then((res)=>{\r\n          if(res.data.msg=== \"success\"){\r\n            UpdateLocal();\r\n            this.isCollect = true;   \r\n               \r\n          }\r\n          if(res.data.msg=== \"fail\"){\r\n            this.$message({\r\n              type:\"error\",\r\n              message:\"收藏失败，请重试！\"\r\n            })\r\n          }\r\n           if(res.data.msg === \"课程已收藏\"){\r\n            UpdateLocal();        \r\n          }\r\n          \r\n        })\r\n          \r\n      }\r\n    },\r\n\r\n    QuestionClick(){\r\n      if(this.isCollect === true){\r\n      //发送取消收藏请求\r\n        console.log(this.questionId)\r\n      CancelCollectQuestion(this.questionId);\r\n        UpdateLocal();\r\n        this.isCollect = false;\r\n      }else{\r\n        //发送收藏请求\r\n        CollectQuestion(this.questionId);\r\n        UpdateLocal();\r\n        this.isCollect = true;\r\n      }\r\n    },\r\n\r\n    IsLogin(){\r\n      if(this.$store.state.login === 0){\r\n        this.isLogin = false;\r\n        return false;\r\n      }else{\r\n        this.isLogin = true;\r\n        return true;\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted(){\r\n     \r\n    if(this.IsLogin()){\r\n       this.IsCollected();\r\n       console.log(this.isCollect);\r\n    } \r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.collect{\r\n  position: absolute;\r\n  cursor: pointer;\r\n  right: 20%;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  padding: 0 5px;\r\n  border: 1px solid var(--color-border);\r\n  border-radius: 5px;\r\n  font-size: var(--font-size-very-big);\r\n}\r\n\r\n.isC{\r\n  color: rgb(247, 186, 42);\r\n}\r\n\r\n\r\n</style>"]}]}