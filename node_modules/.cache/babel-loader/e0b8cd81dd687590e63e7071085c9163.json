{"remainingRequest":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\src\\network\\user.js","dependencies":[{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\src\\network\\user.js","mtime":1650696352052},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650696337516},{"path":"C:\\Users\\pc\\Desktop\\光纤\\计算机设计大赛\\师道\\shidao\\node_modules\\babel-loader\\lib\\index.js","mtime":1650696335596}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCB7IHJlcXVlc3QgfSBmcm9tICcuL3JlcXVlc3QnOwppbXBvcnQgeyBMb2dvdXQgfSBmcm9tICcuL2xvZ2luJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsgLy/nlKjmnaXmm7TmlrDmnKzlnLDnmoTnlKjmiLfnirbmgIHvvIzmr4/mrKHmm7TmlLnlkI7pg73opoHmiafooYzvvIHvvIEKCmV4cG9ydCBmdW5jdGlvbiBHZXRVc2VyKCkgewogIHJldHVybiByZXF1ZXN0KHsKICAgIHVybDogJy9zaGlkYW8vZm9yZS9HZXRVc2VyJywKICAgIG1ldGhvZDogJ2dldCcKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gY2hlY2tVc2VyKGlkKSB7CiAgcmV0dXJuIHJlcXVlc3QoewogICAgdXJsOiAnL3NoaWRhby91c2VySW5mby9jaGVja1VzZXInLAogICAgbWV0aG9kOiAnZ2V0JywKICAgIHBhcmFtczogewogICAgICBpZDogaWQKICAgIH0KICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gVXBkYXRlTG9jYWwoKSB7CiAgdmFyIF90aGlzID0gdGhpczsKCiAgLy/or7fmsYI15qyh55u05Yiw5oiQ5Yqf77yMNeasoeWksei0peW8uuihjOeZu+WHugogIHsKICAgIEdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgaWYgKHJlcy5kYXRhLm1zZyA9PT0gInN1Y2Nlc3MiKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS51c2VySW5mbzsKICAgICAgICBzdG9yZS5jb21taXQoJ1NldFVzZXJTdGF0ZScsIHsKICAgICAgICAgIGxvZ2luOiAxLAogICAgICAgICAgdXNlcklkOiBkYXRhLmlkLAogICAgICAgICAgdXNlck5hbWU6IGRhdGEudXNlcm5hbWUsCiAgICAgICAgICB1c2VySW1nOiBkYXRhLnVzZXJJbWcsCiAgICAgICAgICBkb21haW5UZXh0OiBkYXRhLmRvbWFpblRleHQsCiAgICAgICAgICBjb2xsZWN0aW9uQ2xhc3M6IGRhdGEuY29sbGVjdGlvbkNsYXNzLAogICAgICAgICAgY29sbGVjdGlvblF1ZXN0aW9uOiBkYXRhLmNvbGxlY3Rpb25RdWVzdGlvbgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHJlcy5kYXRhLm1zZyA9PT0gImZhaWwiKSB7CiAgICAgICAgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiAi5oqx5q2J77yM5pyN5Yqh5Zmo6ZSZ6K+v77yM5bCG56uL5Y2z55m75Ye65oKo55qE6LSm5Y+35Lul5L+d6K+B5a6J5YWo77yBIgogICAgICAgICAgfSk7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIExvZ291dCgpOwoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvaG9tZScpOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9Cn0="},{"version":3,"sources":["C:/Users/pc/Desktop/光纤/计算机设计大赛/师道/shidao/src/network/user.js"],"names":["request","Logout","store","GetUser","url","method","checkUser","id","params","UpdateLocal","then","res","data","msg","userInfo","commit","login","userId","userName","username","userImg","domainText","collectionClass","collectionQuestion","$message","type","message","setTimeout","$router","push"],"mappings":";AAAA,SAASA,OAAT,QAAwB,WAAxB;AACA,SAASC,MAAT,QAAuB,SAAvB;AACA,OAAOC,KAAP,MAAkB,UAAlB,C,CAGA;;AACA,OAAO,SAASC,OAAT,GAAmB;AACtB,SAAOH,OAAO,CAAC;AACXI,IAAAA,GAAG,EAAE,sBADM;AAEXC,IAAAA,MAAM,EAAE;AAFG,GAAD,CAAd;AAIH;AACD,OAAO,SAASC,SAAT,CAAmBC,EAAnB,EAAuB;AAC1B,SAAOP,OAAO,CAAC;AACXI,IAAAA,GAAG,EAAE,4BADM;AAEXC,IAAAA,MAAM,EAAE,KAFG;AAGXG,IAAAA,MAAM,EAAC;AACHD,MAAAA,EAAE,EAAFA;AADG;AAHI,GAAD,CAAd;AAOH;AACD,OAAO,SAASE,WAAT,GAAuB;AAAA;;AAG1B;AACA;AACIN,IAAAA,OAAO,GAAGO,IAAV,CAAe,UAACC,GAAD,EAAS;AACpB,UAAIA,GAAG,CAACC,IAAJ,CAASC,GAAT,KAAiB,SAArB,EAAgC;AAC5B,YAAID,IAAI,GAAGD,GAAG,CAACC,IAAJ,CAASE,QAApB;AACAZ,QAAAA,KAAK,CAACa,MAAN,CAAa,cAAb,EAA6B;AACzBC,UAAAA,KAAK,EAAE,CADkB;AAEzBC,UAAAA,MAAM,EAAEL,IAAI,CAACL,EAFY;AAGzBW,UAAAA,QAAQ,EAAEN,IAAI,CAACO,QAHU;AAIzBC,UAAAA,OAAO,EAAER,IAAI,CAACQ,OAJW;AAKzBC,UAAAA,UAAU,EAAET,IAAI,CAACS,UALQ;AAMzBC,UAAAA,eAAe,EAAEV,IAAI,CAACU,eANG;AAOzBC,UAAAA,kBAAkB,EAAEX,IAAI,CAACW;AAPA,SAA7B;AAUA;AACH;;AACD,UAAIZ,GAAG,CAACC,IAAJ,CAASC,GAAT,KAAiB,MAArB,EAA6B;AAEzB;AACI,UAAA,KAAI,CAACW,QAAL,CAAc;AACVC,YAAAA,IAAI,EAAE,OADI;AAEVC,YAAAA,OAAO,EAAE;AAFC,WAAd;;AAIAC,UAAAA,UAAU,CAAC,YAAM;AACb1B,YAAAA,MAAM;;AACN,YAAA,KAAI,CAAC2B,OAAL,CAAaC,IAAb,CAAkB,OAAlB;AACH,WAHS,EAGP,IAHO,CAAV;AAIH;AACJ;AACJ,KA5BD;AA8BH;AAGJ","sourcesContent":["import { request } from './request';\r\nimport { Logout } from './login';\r\nimport store from '../store'\r\n\r\n\r\n//用来更新本地的用户状态，每次更改后都要执行！！\r\nexport function GetUser() {\r\n    return request({\r\n        url: '/shidao/fore/GetUser',\r\n        method: 'get',\r\n    })\r\n}\r\nexport function checkUser(id) {\r\n    return request({\r\n        url: '/shidao/userInfo/checkUser',\r\n        method: 'get',\r\n        params:{\r\n            id\r\n        }\r\n    })\r\n}\r\nexport function UpdateLocal() {\r\n\r\n\r\n    //请求5次直到成功，5次失败强行登出\r\n    {\r\n        GetUser().then((res) => {\r\n            if (res.data.msg === \"success\") {\r\n                let data = res.data.userInfo;\r\n                store.commit('SetUserState', {\r\n                    login: 1,\r\n                    userId: data.id,\r\n                    userName: data.username,\r\n                    userImg: data.userImg,\r\n                    domainText: data.domainText,\r\n                    collectionClass: data.collectionClass,\r\n                    collectionQuestion: data.collectionQuestion\r\n                })\r\n\r\n                return;\r\n            }\r\n            if (res.data.msg === \"fail\") {\r\n\r\n                {\r\n                    this.$message({\r\n                        type: \"error\",\r\n                        message: \"抱歉，服务器错误，将立即登出您的账号以保证安全！\"\r\n                    })\r\n                    setTimeout(() => {\r\n                        Logout();\r\n                        this.$router.push('/home');\r\n                    }, 1000)\r\n                }\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n}"]}]}