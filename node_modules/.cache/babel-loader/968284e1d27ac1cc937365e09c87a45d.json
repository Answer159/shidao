{"remainingRequest":"D:\\DownLoad\\shidao-vue-master\\node_modules\\babel-loader\\lib\\index.js!D:\\DownLoad\\shidao-vue-master\\src\\network\\user.js","dependencies":[{"path":"D:\\DownLoad\\shidao-vue-master\\src\\network\\user.js","mtime":1643186325223},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1644821604128},{"path":"D:\\DownLoad\\shidao-vue-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1644821604590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gJy4vcmVxdWVzdCc7CmltcG9ydCB7IExvZ291dCB9IGZyb20gJy4vbG9naW4nOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUnOyAvL+eUqOadpeabtOaWsOacrOWcsOeahOeUqOaIt+eKtuaAge+8jOavj+asoeabtOaUueWQjumDveimgeaJp+ihjO+8ge+8gQoKZXhwb3J0IGZ1bmN0aW9uIEdldFVzZXIoKSB7CiAgcmV0dXJuIHJlcXVlc3QoewogICAgdXJsOiAnL0dldFVzZXInLAogICAgbWV0aG9kOiAnZ2V0JwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBVcGRhdGVMb2NhbCgpIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICAvL+ivt+axgjXmrKHnm7TliLDmiJDlip/vvIw15qyh5aSx6LSl5by66KGM55m75Ye6CiAgewogICAgR2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLmRhdGEubXNnID09ICJzdWNjZXNzIikgewogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEudXNlckluZm87CiAgICAgICAgc3RvcmUuY29tbWl0KCdTZXRVc2VyU3RhdGUnLCB7CiAgICAgICAgICBsb2dpbjogMSwKICAgICAgICAgIHVzZXJJZDogZGF0YS5pZCwKICAgICAgICAgIHVzZXJOYW1lOiBkYXRhLnVzZXJuYW1lLAogICAgICAgICAgdXNlckltZzogImFkbWluLmpwZyIsCiAgICAgICAgICBjb2xsZWN0aW9uX2NsYXNzOiBkYXRhLmNvbGxlY3Rpb25fY2xhc3MsCiAgICAgICAgICBjb2xsZWN0aW9uX3F1ZXN0aW9uOiBkYXRhLmNvbGxlY3Rpb25fcXVlc3Rpb24KICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChyZXMuZGF0YS5tc2cgPT0gImZhaWwiKSB7CiAgICAgICAgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiAi5oqx5q2J77yM5pyN5Yqh5Zmo6ZSZ6K+v77yM5bCG56uL5Y2z55m75Ye65oKo55qE6LSm5Y+35Lul5L+d6K+B5a6J5YWo77yBIgogICAgICAgICAgfSk7CgogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIExvZ291dCgpOwoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvaG9tZScpOwogICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9Cn0="},{"version":3,"sources":["D:/DownLoad/shidao-vue-master/src/network/user.js"],"names":["request","Logout","store","GetUser","url","method","UpdateLocal","then","res","data","msg","userInfo","commit","login","userId","id","userName","username","userImg","collection_class","collection_question","$message","type","message","setTimeout","$router","push"],"mappings":"AAAA,SAASA,OAAT,QAAwB,WAAxB;AACA,SAASC,MAAT,QAAuB,SAAvB;AACA,OAAOC,KAAP,MAAkB,UAAlB,C,CAGA;;AACA,OAAO,SAASC,OAAT,GAAmB;AACtB,SAAOH,OAAO,CAAC;AACXI,IAAAA,GAAG,EAAE,UADM;AAEXC,IAAAA,MAAM,EAAE;AAFG,GAAD,CAAd;AAIH;AAED,OAAO,SAASC,WAAT,GAAuB;AAAA;;AAG1B;AACA;AACIH,IAAAA,OAAO,GAAGI,IAAV,CAAe,UAACC,GAAD,EAAS;AACpB,UAAIA,GAAG,CAACC,IAAJ,CAASC,GAAT,IAAgB,SAApB,EAA+B;AAC3B,YAAID,IAAI,GAAGD,GAAG,CAACC,IAAJ,CAASE,QAApB;AACAT,QAAAA,KAAK,CAACU,MAAN,CAAa,cAAb,EAA6B;AACzBC,UAAAA,KAAK,EAAE,CADkB;AAEzBC,UAAAA,MAAM,EAAEL,IAAI,CAACM,EAFY;AAGzBC,UAAAA,QAAQ,EAAEP,IAAI,CAACQ,QAHU;AAIzBC,UAAAA,OAAO,EAAE,WAJgB;AAKzBC,UAAAA,gBAAgB,EAAEV,IAAI,CAACU,gBALE;AAMzBC,UAAAA,mBAAmB,EAAEX,IAAI,CAACW;AAND,SAA7B;AASA;AACH;;AACD,UAAIZ,GAAG,CAACC,IAAJ,CAASC,GAAT,IAAgB,MAApB,EAA4B;AAExB;AACI,UAAA,KAAI,CAACW,QAAL,CAAc;AACVC,YAAAA,IAAI,EAAE,OADI;AAEVC,YAAAA,OAAO,EAAE;AAFC,WAAd;;AAIAC,UAAAA,UAAU,CAAC,YAAM;AACbvB,YAAAA,MAAM;;AACN,YAAA,KAAI,CAACwB,OAAL,CAAaC,IAAb,CAAkB,OAAlB;AACH,WAHS,EAGP,IAHO,CAAV;AAIH;AACJ;AACJ,KA3BD;AA6BH;AAGJ","sourcesContent":["import { request } from './request';\nimport { Logout } from './login';\nimport store from '../store'\n\n\n//用来更新本地的用户状态，每次更改后都要执行！！\nexport function GetUser() {\n    return request({\n        url: '/GetUser',\n        method: 'get',\n    })\n}\n\nexport function UpdateLocal() {\n\n\n    //请求5次直到成功，5次失败强行登出\n    {\n        GetUser().then((res) => {\n            if (res.data.msg == \"success\") {\n                let data = res.data.userInfo;\n                store.commit('SetUserState', {\n                    login: 1,\n                    userId: data.id,\n                    userName: data.username,\n                    userImg: \"admin.jpg\",\n                    collection_class: data.collection_class,\n                    collection_question: data.collection_question\n                })\n\n                return;\n            }\n            if (res.data.msg == \"fail\") {\n\n                {\n                    this.$message({\n                        type: \"error\",\n                        message: \"抱歉，服务器错误，将立即登出您的账号以保证安全！\"\n                    })\n                    setTimeout(() => {\n                        Logout();\n                        this.$router.push('/home');\n                    }, 1000)\n                }\n            }\n        })\n\n    }\n\n\n}"]}]}